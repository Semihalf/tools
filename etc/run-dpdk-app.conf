##
## DPDK Application Default Configuration File
## by Andriy Berestovskyy
##
## DO NOT EDIT this file unless there is a system change
## Override any options in a local configuration file instead.
##

#################################################################
## APPLICATION CONFIGURATION

APP_NAME="DPDK Pktgen"
APP_FNAME="pktgen"
APP_OPTIONS="    ipX  an IP to use (ip[@mac] format)
    ifX  an interface to bind and use configured interface IP"
APP_EXAMPLE="10.0.0.1@00:01:02:03:04:05 10.0.0.2 eth1 eth2"

# List of directories to look the application binary
APP_DIRS="${HOME}/pktgen-dpdk /usr/local/lib/pktgen-dpdk"

# Memory to use by the application (per NUMA node)
# Example:
#     256     - to allocate 256MB on NUMA 0
#     256,256 - to allocate 256B on NUMA 0 and 256 on NUMA 1
SOCKET_MEM="256"

# Number of IPs to expect
NB_IPS="2"

# Number of interfaces to expect
NB_INTERFACES="2"

# App subpath, i.e. "app" (optional)
APP_SUBPATH="app"

# Default app arguments (optional). Interface names come first.
# Note: the IPs below work well with DPDK L3 Forwarding example
APP_DEF_ARGS="1.1.1.1@00:00:00:00:00:01 2.1.1.1@00:00:00:00:00:02"
APP_DEF_ARGS="${APP_DEF_ARGS} eth1 eth2 -T -p 7 -P -m [0:1].0,[2:3].1"

# Template file(s) (optional)
APP_TEMPLATE_EXT=".lua"
APP_TEMPLATE_FLAG="-f"

#################################################################
## DPDK CONFIGURATION

# List of directories to look DPDK for
DPDK_DIRS="${HOME}/dpdk /usr/local/lib/dpdk"

# The lcores configuration
DPDK_LCORES="0-4"
DPDK_EXTRA_ARGS="--master-lcore=4 --log-level=8"

# UIO kernel module name
# TODO: slow performance (~5,6 MPPS) on vfio-pci due to hardware bug
UIO_MODULE="vfio-pci"
#UIO_MODULE="igb_uio"
#UIO_MODULE="uio_pci_generic"

# HugeTLBfs mount point
TLBFS_DIR="/mnt/huge"

# Number of HugePages to configure
NB_HUGEPAGES="4096"

# DPDK target
RTE_TARGET="x86_64-native-linuxapp-gcc"
RTE_TARGET_aarch64="arm64-thunderx-linuxapp-gcc"

# Disable igb_uio and KNI for aarch64
DPDK_CONFIG_aarch64="EAL_IGB_UIO=n KNI_KMOD=n"

# Bind tool subpath relative to DPDK dir
BIND_SUBPATHS="tools/dpdk-devbind.py usertools/dpdk-devbind.py"

# An application to test if DPDK is compiled
TESTPMD_SUBPATH="app/testpmd"

# Make
MAKE="make -j 8"
